# BLDC Motor Configuration Example
#
# This module provides complete control over a BLDC motor including:
# - PWM speed control
# - Direction control
# - Brake control
# - Power control (optional)

[bldc_motor]
# PWM pin for speed control (must be PWM-capable)
pwm_pin: PC9

# Direction pin (digital output)
# BLDC controller: LOW = change direction, HIGH = normal
dir_pin: PB4

# Brake pin (digital output, optional)
# BLDC controller: HIGH = brake ON, LOW = brake OFF
brake_pin: PD5

# Power pin (digital output, optional)
# Controls motor power supply (e.g., from bed heater port)
power_pin: PB7

# Motor parameters
max_rpm: 3000.0        # Maximum RPM
min_rpm: 10.0          # Minimum RPM (below this, motor won't start)
pwm_frequency: 1000.0  # PWM frequency in Hz
min_pwm_duty: 0.05     # Minimum PWM duty cycle (5%) - prevents motor stalling

# Pin inversion (if your level shifter inverts signals)
dir_inverted: False    # Set True if DIR pin is inverted
brake_inverted: False  # Set True if brake pin is inverted

# Example usage:
# BLDC_START RPM=1000 DIRECTION=forward
# BLDC_SET_RPM RPM=1500
# BLDC_SET_DIR DIRECTION=reverse
# BLDC_SET_BRAKE ENGAGE=1
# BLDC_SET_POWER ENABLE=1
# BLDC_STOP
# QUERY_BLDC

